#!/usr/bin/env ruby

require_relative '../lib/board'

class UserInterface
  attr_accessor :player_one, :player_two

  def initialize
    @board = Board.new
    @game = Board.new
    @arr = []
    @player_one = ''
    @player_two = ''
    @cell = [1, 2, 3, 4, 5, 6, 7, 8, 9]
  end

  def num_check(move)
    if @arr.include?(move)
      puts 'Enter a Valid number thats not already played'
      false
    elsif !(1..9).include? move
      puts 'Enter a number between 1 and 9'
      false
    else
      @arr << move
      true

    end
  end

  def one_output
    # puts @board.display
    puts " its #{@player_one} turn"

    select1 = false
    while select1 == false
      input = gets.chomp.to_i
      @game.board[input - 1] = 'x'

      select1 = num_check(input)

    end

    puts @game.display
  end

  def two_outout
    # puts @board.display

    puts "its #{@player_two} turn"

    select1 = false
    while select1 == false
      input = gets.chomp.to_i
      @game.board[input - 1] = 'o'
      select1 = num_check(input)
    end

    puts @game.display
  end

  def players
    turn = 0
    board_status = @game.board
    puts @game.display
    while turn < 9
      if turn.even?

        puts one_output
        if @game.win?(board_status)
          puts 'player one wins this round'
          break
        elsif @game.tie?(board_status)
          puts "It's a Tie , no one wins"
          break
        end

      else
        puts two_outout
        if @game.win?(board_status)
          puts 'player two wins this round'
          break
        elsif @game.tie?(board_status)
          puts "It's a Tie , no one wins"
          break
        end
      end
      turn += 1
    end
  end
end

result = UserInterface.new
game_on = true
while game_on == true
  puts 'Welcome to Rubys Tic-Tac-Toe'
  puts 'Enter player 1 name :'
  puts
  result.player_one = gets.chomp

  while result.player_one.length.zero?
    puts 'Dont leave it Blank'
    result.player_one = (gets.chomp)
    result.player_one
  end

  puts 'Enter player 2 name :'
  puts
  result.player_two = gets.chomp

  while result.player_two.length.zero?
    puts 'Dont leave it Blank'
    result.player_two = (gets.chomp)
    result.player_two
  end

  puts 'lets play! Enter a number to match the position you want to play on the board'
  puts
  puts result.players

  puts 'Game over '

  puts 'play another game ? yes or no'
  response = gets.chomp.to_s

  if response.include?('no')
    game_on = false
  elsif response.include?('yes')
    true
  end
end
